- name: Test git_branch
  hosts: test
  vars:
    repo_one: /opt/repo_one

  pre_tasks:
    - name: setup dirs
      include_tasks: tasks/empty_directory.yaml
      loop:
        - {repo: "{{ repo_one }}"}

    - name: init repo_one
      include_tasks: tasks/test_init_repo.yaml
      loop:
        - {repo: "{{ repo_one }}"}

  tasks:
    - name: run git_branch tests
      include_tasks: tasks/test_branch.yaml
      loop:
        - {repo: "{{ repo_one }}", filename: foo }

